{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./src/views/Analyser.vue?4b53","webpack:///src/views/Analyser.vue","webpack:///./src/views/Analyser.vue?146a","webpack:///./src/views/Analyser.vue","webpack:///./src/views/Analyser.vue?173d"],"names":["init","data","byteOffset","length","this","render","_vm","_h","$createElement","_c","_self","attrs","_v","on","clickHandler","muteHandler","_s","isMute","staticClass","_l","n","key","style","fftArray","staticRenderFns","name","gainNode","gain","value","analyser","fftSize","connect","isPlaying","source","audioCtx","micStream","Uint8Array","methods","stop","play","destination","requestAnimationFrame","getFFTData","disconnect","getUserMic","stream","createMediaStreamSource","getByteFrequencyData","mounted","navigator","mediaDevices","getUserMedia","beforeDestroy","component"],"mappings":"8HAAA,EAAQ,OAAR,CAA0B,QAAS,GAAG,SAAUA,GAC9C,OAAO,SAAoBC,EAAMC,EAAYC,GAC3C,OAAOH,EAAKI,KAAMH,EAAMC,EAAYC,Q,2CCFxC,IAAIE,EAAS,WAAa,IAAIC,EAAIF,KAASG,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,aAAa,CAACF,EAAG,KAAK,CAACH,EAAIM,GAAG,cAAcH,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQP,EAAIQ,eAAe,CAACR,EAAIM,GAAG,oBAAoBH,EAAG,SAAS,CAACI,GAAG,CAAC,MAAQP,EAAIS,cAAc,CAACT,EAAIM,GAAG,IAAIN,EAAIU,GAAGV,EAAIW,OAAS,SAAW,QAAQ,OAAOR,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,WAAW,CAACF,EAAG,MAAM,CAACS,YAAY,cAAc,CAACT,EAAG,MAAM,CAACS,YAAY,UAAUZ,EAAIa,GAAG,KAAM,SAASC,GAAG,OAAOX,EAAG,MAAM,CAACY,IAAID,EAAEF,YAAY,UAAUI,MAAM,CAAE,OAAUhB,EAAIiB,SAAUH,EAAE,GAAI,EAAI,WAAW,UAC7iBI,EAAkB,G,wBCgBtB,GACEC,KAAM,WACNxB,KAFF,WAGI,IAAJ,iDACA,QACA,iBACA,qBAKI,OAHAyB,EAASC,KAAKC,MAAQ,EACtBC,EAASC,QAAU,KACnBD,EAASE,QAAQL,GACrB,CACMM,WAAW,EACXf,QAAQ,EACRgB,OAAQ,KACRC,SAAN,EACMR,SAAN,EACMG,SAAN,EACMM,UAAW,KACXZ,SAAU,IAAIa,WAAWP,EAASC,WAGtCO,QAAS,CACPvB,aADJ,WAEUV,KAAK4B,UACP5B,KAAKkC,OAELlC,KAAKmC,QAGTxB,YARJ,WASUX,KAAKa,QACPb,KAAKa,QAAS,EACdb,KAAKsB,SAASC,KAAKC,MAAQ,IAE3BxB,KAAKa,QAAS,EACdb,KAAKsB,SAASC,KAAKC,MAAQ,IAG/BW,KAjBJ,WAkBMnC,KAAK4B,WAAY,EACjB5B,KAAKsB,SAASK,QAAQ3B,KAAK8B,SAASM,aACpCC,sBAAsBrC,KAAKsC,aAE7BJ,KAtBJ,WAuBMlC,KAAK4B,WAAY,EACjB5B,KAAKsB,SAASiB,WAAWvC,KAAK8B,SAASM,cAEzCI,WA1BJ,SA0BA,GACMxC,KAAK+B,UAAYU,EACjBzC,KAAK6B,OAAS7B,KAAK8B,SAASY,wBAAwBD,GACpDzC,KAAK6B,OAAOF,QAAQ3B,KAAKyB,WAE3Ba,WA/BJ,WAgCMtC,KAAKmB,SAAW,IAAIa,WAAWhC,KAAKyB,SAASC,SAC7C1B,KAAKyB,SAASkB,qBAAqB3C,KAAKmB,UACpCnB,KAAK4B,WAAWS,sBAAsBrC,KAAKsC,cAGnDM,QA3DF,WA4DI,OAAJ,OAAI,CAAJ,eACIC,UAAUC,aAAaC,aAAa,CAAxC,oBACA,sBACA,6CAEEC,cAjEF,WAkEA,4DCnFkV,I,wBCQ9UC,EAAY,eACd,EACAhD,EACAmB,GACA,EACA,KACA,WACA,MAIa,aAAA6B,E,2CCnBf,yBAAkiB,EAAG","file":"js/chunk-26880414.f335e2e4.js","sourcesContent":["require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"analyser\"}},[_c('h1',[_vm._v(\"Analyser\")]),_c('button',{on:{\"click\":_vm.clickHandler}},[_vm._v(\" Play / Pause \")]),_c('button',{on:{\"click\":_vm.muteHandler}},[_vm._v(\" \"+_vm._s(_vm.isMute ? 'unmute' : 'mute')+\" \")]),_c('div',{attrs:{\"id\":\"config\"}},[_c('div',{staticClass:\"audio-note\"},[_c('div',{staticClass:\"result\"},_vm._l((512),function(n){return _c('div',{key:n,staticClass:\"fftData\",style:({'height': _vm.fftArray[(n-1)]+2 + 'px'})})}),0)])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"analyser\">\n    <h1>Analyser</h1>\n    <button @click=\"clickHandler\"> Play / Pause </button>\n    <button @click=\"muteHandler\"> {{isMute ? 'unmute' : 'mute'}} </button>\n    <div id=\"config\">\n      <div class=\"audio-note\">\n        <div class=\"result\">\n          <div class=\"fftData\" v-for=\"n in 512\" :key=\"n\" :style=\"{'height': fftArray[(n-1)]+2 + 'px'}\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport audioUnlock from '../lib/audioUnlock'\nexport default {\n  name: \"Analyser\",\n  data() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext // 跨瀏覽器\n    const audioCtx = new AudioContext() // 主控台的概念\n    const gainNode = audioCtx.createGain() // 增益節點 控制音量的\n    const analyser = audioCtx.createAnalyser()\n\n    gainNode.gain.value = 1\n    analyser.fftSize = 1024\n    analyser.connect(gainNode)\n    return{\n      isPlaying: false,\n      isMute: false,\n      source: null,\n      audioCtx,\n      gainNode,\n      analyser,\n      micStream: null,\n      fftArray: new Uint8Array(analyser.fftSize),\n    }\n  },\n  methods: {\n    clickHandler(){\n      if (this.isPlaying) {\n        this.stop()\n      } else {\n        this.play()\n      }\n    },\n    muteHandler() {\n      if (this.isMute) {\n        this.isMute = false\n        this.gainNode.gain.value = 1\n      } else {\n        this.isMute = true\n        this.gainNode.gain.value = 0\n      }\n    },\n    play() {\n      this.isPlaying = true\n      this.gainNode.connect(this.audioCtx.destination)\n      requestAnimationFrame(this.getFFTData)\n    },\n    stop() {\n      this.isPlaying = false\n      this.gainNode.disconnect(this.audioCtx.destination)\n    },\n    getUserMic(stream) {\n      this.micStream = stream\n      this.source = this.audioCtx.createMediaStreamSource(stream)\n      this.source.connect(this.analyser)\n    },\n    getFFTData(){\n      this.fftArray = new Uint8Array(this.analyser.fftSize)\n      this.analyser.getByteFrequencyData(this.fftArray)\n      if (this.isPlaying) requestAnimationFrame(this.getFFTData)\n    }\n  },\n  mounted() {\n    audioUnlock(this.audioCtx)\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n    .then(this.getUserMic)\n    .catch(e => console.log(e))\n  },\n  beforeDestroy() {\n    if(this.micStream) this.micStream.getAudioTracks()[0].stop()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n#analyser {\n  > button {\n    margin: 10px;\n  }\n  #config {\n    display: flex;\n    justify-content: space-around;\n    flex-direction: column;\n    > .audio-note {\n      width: 50vw;\n      min-width: 300px;\n      margin: 15px auto;\n      border: solid 1px #d9d9d9;\n      .result {\n        display: flex;\n        justify-content: center;\n        height: 300px;\n        vertical-align: middle;\n        align-items: center;\n        .fftData {\n          display: block;\n          width: 2px;\n          background-color: #3692be;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Analyser.vue?vue&type=template&id=f1275f40&scoped=true&\"\nimport script from \"./Analyser.vue?vue&type=script&lang=js&\"\nexport * from \"./Analyser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Analyser.vue?vue&type=style&index=0&id=f1275f40&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1275f40\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=style&index=0&id=f1275f40&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=style&index=0&id=f1275f40&lang=scss&scoped=true&\""],"sourceRoot":""}