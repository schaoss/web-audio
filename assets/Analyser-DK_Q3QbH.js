import{a as k}from"./audioUnlock-CHVvazkl.js";import{d as w,r,b as C,e as S,c as v,f as e,t as b,F,i as U,n as B,o as _}from"./index-Dp99J6ZZ.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={id:"analyser"},z={class:"text-center my-4"},q={id:"config"},P={class:"audio-note"},H={class:"result"},N=w({__name:"Analyser",setup(T){const y=window.AudioContext||window.webkitAudioContext,t=new y,a=t.createGain(),n=t.createAnalyser();a.gain.value=1,n.fftSize=1024,n.connect(a);const s=r(!1),i=r(!1);let u=null,c=null;const l=r(new Uint8Array(n.fftSize));function p(){s.value?A():x()}function g(){i.value=!i.value,a.gain.value=i.value?0:1}function x(){s.value=!0,a.connect(t.destination),requestAnimationFrame(d)}function A(){s.value=!1,a.disconnect(t.destination)}function h(o){c=o,u=t.createMediaStreamSource(o),u.connect(n)}function d(){l.value=new Uint8Array(n.fftSize),n.getByteFrequencyData(l.value),s.value&&requestAnimationFrame(d)}return C(()=>{k(t),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(h).catch(o=>console.error(o))}),S(()=>{c&&c.getAudioTracks()[0].stop()}),(o,f)=>(_(),v("div",M,[f[0]||(f[0]=e("h1",{class:"text-3xl font-bold text-center my-8 dark:text-white"},"Analyser",-1)),e("div",z,[e("button",{class:"btn",onClick:p}," Play / Pause "),e("button",{class:"btn",onClick:g},b(i.value?"unmute":"mute"),1)]),e("div",q,[e("div",P,[e("div",H,[(_(),v(F,null,U(512,m=>e("div",{class:"fftData",key:m,style:B({height:l.value[m-1]+2+"px"})},null,4)),64))])])])]))}}),L=D(N,[["__scopeId","data-v-58d83f5a"]]);export{L as default};
