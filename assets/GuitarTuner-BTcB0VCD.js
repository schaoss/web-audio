import{d as I,b as S,e as q,r as a,c as y,f as e,w as x,g as _,t as p,h as k,v as O,a as P,F as R,i as L,o as A}from"./index-Dp99J6ZZ.js";import{a as $}from"./audioUnlock-CHVvazkl.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={id:"guitar-tuner"},J={id:"config"},K={class:"audio-note"},Q={class:"item"},W={for:"standardA4"},X={class:"item"},Y={class:"item"},Z={for:"volume"},ee={id:"notes"},te=["onClick"],ne={id:"display"},oe={class:"text-3xl font-bold text-center my-8"},ae=I({__name:"GuitarTuner",setup(se){const N=window.AudioContext||window.webkitAudioContext,s=new N,i=s.createOscillator(),l=s.createGain(),r=a(!1),D=a("triangle"),f=a(440),b=a(0),d=a(1),u=a(440),m=a("standard"),g=a(["E2","A2","D3","G3","B3","E4"]),c=a("-"),T={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},C={standard:["E2","A2","D3","G3","B3","E4"],"1-step-down":["D2","G2","C3","F3","A3","D4"],"drop-d":["D2","A2","D3","G3","B3","E4"],"open-e":["E2","B2","E3","G#3","B3","E4"],"open-d":["D2","A2","D3","F#3","A3","D4"]};function F(){r.value?(U(),c.value="-"):(w(g.value[0]),V()),r.value=!r.value}function h(){g.value=H()}function w(o){c.value=o,f.value=B(G(o)),v()}function E(){f.value=B(G(c.value)),v()}function M(){D.value="triangle",u.value=440,b.value=0,d.value=1,v()}function V(){l.connect(s.destination)}function U(){l.disconnect(s.destination)}function v(){i.type=D.value,i.frequency.value=f.value,i.detune.value=b.value,l.gain.value=d.value}function G(o){if(!o||o==="-")return 69;const t=o.slice(0,-1),n=parseInt(o.slice(-1));return(T[t]??0)+12*(1+n)}function B(o){return u.value*Math.pow(2,(o-69)/12)}function H(){return C[m.value]??C.standard}return S(()=>{$(s),v(),i.connect(l),i.start()}),q(()=>{r.value&&l.disconnect(s.destination)}),(o,t)=>(A(),y("div",z,[t[8]||(t[8]=e("h1",{class:"text-3xl font-bold text-center my-8 dark:text-white"}," Guitar Tuner ",-1)),e("div",{class:"text-center my-4"},[e("button",{class:"btn",onClick:F}," Play / Pause "),e("button",{class:"btn",onClick:M}," Reset ")]),e("div",J,[e("div",K,[t[7]||(t[7]=e("h3",null,[e("span",null,"設定")],-1)),e("div",Q,[e("label",W,[t[3]||(t[3]=_("A4 : ",-1)),e("span",null,p(u.value),1)]),x(e("input",{type:"range",min:"430",max:"450",step:"1",id:"standardA4Range","onUpdate:modelValue":t[0]||(t[0]=n=>u.value=n),onInput:E,class:"accent-primary"},null,544),[[k,u.value]])]),e("div",X,[t[5]||(t[5]=e("label",{for:"tuning"},[_("調弦法 : "),e("span")],-1)),x(e("select",{id:"tuning","onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),onChange:h,class:"styled-select"},[...t[4]||(t[4]=[P('<option value="standard" selected data-v-4d865dae>標準</option><option value="1-step-down" data-v-4d865dae>降全音</option><option value="drop-d" data-v-4d865dae>Drop D</option><option value="open-e" data-v-4d865dae>Open E</option><option value="open-d" data-v-4d865dae>Open D</option>',5)])],544),[[O,m.value]])]),e("div",Y,[e("label",Z,[t[6]||(t[6]=_("volume : ",-1)),e("span",null,p(d.value),1)]),x(e("input",{type:"range",min:"0",max:"5",step:"0.1",id:"volumeRange","onUpdate:modelValue":t[2]||(t[2]=n=>d.value=n),onInput:E,class:"accent-primary"},null,544),[[k,d.value]])])])]),e("div",ee,[(A(!0),y(R,null,L(g.value,n=>(A(),y("div",{class:"note",key:n,onClick:ie=>w(n)},p(n),9,te))),128))]),e("div",ne,[e("h1",oe,p(c.value),1)])]))}}),re=j(ae,[["__scopeId","data-v-4d865dae"]]);export{re as default};
