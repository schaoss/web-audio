{"version":3,"sources":["webpack:///./src/lib/audioUnlock.js","webpack:///./src/static/Rainy_Day_Games.mp3","webpack:///./src/views/Source.vue?0125","webpack:///./src/views/Source.vue?896a","webpack:///src/views/Source.vue","webpack:///./src/views/Source.vue?463e","webpack:///./src/views/Source.vue"],"names":["__webpack_exports__","audioCtx","state","window","unlock","resume","then","document","body","removeEventListener","addEventListener","module","exports","__webpack_require__","p","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Source_vue_vue_type_style_index_0_id_08d946d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Source_vue_vue_type_style_index_0_id_08d946d0_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","on","click","clickHandler","reset","staticClass","change","$event","sourceType","target","value","directives","name","rawName","expression","for","_s","waveType","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","val","_value","multiple","changeHandler","frequency","type","min","max","step","domProps","input","__r","detune","vid","_m","micOutput","staticRenderFns","controls","preload","src","Sourcevue_type_script_lang_js_","data","AudioContext","webkitAudioContext","gainNode","createGain","isPlaying","source","audioSource","micStream","methods","stop","play","setNoteConfig","connect","destination","disconnect","getUserMic","stream","_this","createMediaStreamSource","processor","createScriptProcessor","onaudioprocess","e","inputBuffer","getChannelData","output","outputBuffer","i","length","watch","handler","querySelector","pause","getAudioTracks","createOscillator","start","audio","createMediaElementSource","navigator","mediaDevices","getUserMedia","video","catch","console","log","immediate","mounted","Object","audioUnlock","beforeDestroy","views_Sourcevue_type_script_lang_js_","component","componentNormalizer"],"mappings":"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","file":"js/chunk-37519c7d.7d697af6.js","sourcesContent":["export default function(audioCtx) {\n  if (audioCtx.state === 'suspended' && 'ontouchstart' in window) {\n    const unlock = () => {\n      audioCtx.resume().then(() => {\n        document.body.removeEventListener('touchstart', unlock)\n        document.body.removeEventListener('touchend', unlock)\n      })\n    }\n    document.body.addEventListener('touchstart', unlock, false)\n    document.body.addEventListener('touchend', unlock, false)\n  }\n}\n","module.exports = __webpack_public_path__ + \"media/Rainy_Day_Games.6e7525ec.mp3\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Source.vue?vue&type=style&index=0&id=08d946d0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Source.vue?vue&type=style&index=0&id=08d946d0&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"source\"}},[_c('h1',[_vm._v(\"Source\")]),_c('button',{on:{\"click\":_vm.clickHandler}},[_vm._v(\" Play / Pause \")]),_c('button',{on:{\"click\":_vm.reset}},[_vm._v(\" Reset \")]),_c('div',{attrs:{\"id\":\"config\"}},[_c('div',{staticClass:\"audio-note\"},[_c('h3',[_c('span',[_vm._v(\"音源：\")]),_c('select',{on:{\"change\":function($event){_vm.sourceType=$event.target.value}}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"振盪器\")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Audio Tag\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"麥克風\")])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceType==='0'),expression:\"sourceType==='0'\"}]},[_c('div',{staticClass:\"item\"},[_c('label',{attrs:{\"for\":\"waveType\"}},[_vm._v(\"type : \"),_c('span',[_vm._v(_vm._s(_vm.waveType))])]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.waveType),expression:\"waveType\"}],attrs:{\"id\":\"waveType\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.waveType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.changeHandler]}},[_c('option',{attrs:{\"value\":\"sine\",\"selected\":\"\"}},[_vm._v(\"sine\")]),_c('option',{attrs:{\"value\":\"square\"}},[_vm._v(\"square\")]),_c('option',{attrs:{\"value\":\"sawtooth\"}},[_vm._v(\"sawtooth\")]),_c('option',{attrs:{\"value\":\"triangle\"}},[_vm._v(\"triangle\")])])]),_c('div',{staticClass:\"item\"},[_c('label',{attrs:{\"for\":\"frequency\"}},[_vm._v(\"frequency : \"),_c('span',[_vm._v(_vm._s(_vm.frequency))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.frequency),expression:\"frequency\"}],attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":\"4000\",\"step\":\"1\",\"id\":\"frequencyRange\"},domProps:{\"value\":(_vm.frequency)},on:{\"input\":_vm.changeHandler,\"__r\":function($event){_vm.frequency=$event.target.value}}})]),_c('div',{staticClass:\"item\"},[_c('label',{attrs:{\"for\":\"detune\"}},[_vm._v(\"detune : \"),_c('span',[_vm._v(_vm._s(_vm.detune))])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.detune),expression:\"detune\"}],attrs:{\"type\":\"range\",\"min\":\"-2000\",\"max\":\"2000\",\"step\":\"1\",\"vid\":\"detuneRange\"},domProps:{\"value\":(_vm.detune)},on:{\"input\":_vm.changeHandler,\"__r\":function($event){_vm.detune=$event.target.value}}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceType==='1'),expression:\"sourceType==='1'\"}]},[_vm._m(0)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sourceType ==='2'),expression:\"sourceType ==='2'\"}]},[_c('div',{staticClass:\"item\"},[_vm._v(_vm._s(_vm.micOutput))])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item\"},[_c('audio',{attrs:{\"id\":\"player\",\"controls\":\"\",\"preload\":\"\"}},[_c('source',{attrs:{\"src\":require(\"../static/Rainy_Day_Games.mp3\"),\"type\":\"audio/mp3\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"source\">\n    <h1>Source</h1>\n    <button @click=\"clickHandler\"> Play / Pause </button>\n    <button @click=\"reset\"> Reset </button>\n    <div id=\"config\">\n      <div class=\"audio-note\">\n        <h3>\n          <span>音源：</span>\n          <select @change=\"sourceType=$event.target.value\">\n            <option value=\"0\">振盪器</option>\n            <option value=\"1\">Audio Tag</option>\n            <option value=\"2\">麥克風</option>\n          </select>\n        </h3>\n\n        <div v-show=\"sourceType==='0'\">\n          <div class=\"item\">\n            <label for=\"waveType\">type : <span>{{ waveType }}</span></label>\n            <select id=\"waveType\" v-model=\"waveType\" @change=\"changeHandler\">\n              <option value='sine' selected>sine</option>\n              <option value='square'>square</option>\n              <option value='sawtooth'>sawtooth</option>\n              <option value='triangle'>triangle</option>\n            </select>\n          </div>\n          <div class=\"item\">\n            <label for=\"frequency\">frequency : <span>{{frequency}}</span> </label>\n            <input type=\"range\" min=\"0\" max=\"4000\" step=\"1\" id=\"frequencyRange\" v-model=\"frequency\" @input=\"changeHandler\">\n          </div>\n          <div class=\"item\">\n            <label for=\"detune\">detune : <span>{{detune}}</span> </label>\n            <input type=\"range\" min=\"-2000\" max=\"2000\" step=\"1\" vid=\"detuneRange\" v-model=\"detune\" @input=\"changeHandler\">\n          </div>\n        </div>\n        <div v-show=\"sourceType==='1'\">\n          <div class=\"item\">\n            <audio id=\"player\" controls preload>\n              <source src=\"../static/Rainy_Day_Games.mp3\" type=\"audio/mp3\" />\n            </audio>\n          </div>\n        </div>\n        <div v-show=\"sourceType ==='2'\">\n          <div class=\"item\">{{micOutput}}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport audioUnlock from '../lib/audioUnlock'\nexport default {\n  name: \"Source\",\n  data() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext // 跨瀏覽器\n    const audioCtx = new AudioContext() // 主控台的概念\n    const gainNode = audioCtx.createGain() // 增益節點 控制音量的\n\n    return{\n      isPlaying: false,\n      sourceType: \"0\",\n      source: null,\n      audioCtx,\n      gainNode,\n      waveType: 'sine', // sine, square, sawtooth, triangle\n      frequency: 440, // A4\n      detune: 0, // 解諧 可做出和聲\n      audioSource: null,\n      micStream: null,\n      micOutput:[]\n    }\n  },\n  methods: {\n    clickHandler(){\n      if (this.isPlaying) {\n        this.stop()\n      } else {\n        this.play()\n      }\n    },\n    changeHandler(){\n      this.setNoteConfig()\n    },\n    reset(){\n      this.waveType = 'sine'\n      this.frequency = 440\n      this.detune = 0\n      this.setNoteConfig()\n    },\n    play() {\n      this.isPlaying = true\n      this.gainNode.connect(this.audioCtx.destination)\n    },\n    stop() {\n      this.isPlaying = false\n      this.gainNode.disconnect(this.audioCtx.destination)\n    },\n    setNoteConfig() {\n      if(this.sourceType === \"0\"){\n        this.source.type = this.waveType\n        this.source.frequency.value = this.frequency\n        this.source.detune.value = this.detune\n      }\n    },\n    getUserMic(stream) {\n      this.micStream = stream\n      this.source = this.audioCtx.createMediaStreamSource(stream)\n      const processor = this.audioCtx.createScriptProcessor(1024, 1, 1)\n      processor.onaudioprocess = (e) => {\n        const input = e.inputBuffer.getChannelData(0);\n        const output = e.outputBuffer.getChannelData(0);\n        for (var i = 0; i < input.length; i++) {\n          output[i] = input[i]\n        }\n        this.micOutput = output\n      }\n      this.source.connect(processor)\n      processor.connect(this.gainNode)\n    }\n  },\n  watch: {\n    'sourceType': {\n      handler: function(n, p) {\n        if (this.isPlaying) {\n          this.stop()\n        }\n        if (this.source) {\n          if(p === \"0\") this.source.stop()\n          else if(p === \"1\") document.querySelector('audio').pause()\n          else if(p === \"2\") this.micStream.getAudioTracks()[0].stop()\n        }\n        switch(n) {\n          default:\n          case \"0\":\n            this.source = this.audioCtx.createOscillator()\n            this.source.start()\n            this.source.connect(this.gainNode)\n            break\n          case \"1\":\n            const audio = document.querySelector('audio');\n            audio.play()\n            if(!this.audioSource) {\n              this.audioSource = this.audioCtx.createMediaElementSource(audio)\n            }\n            this.source = this.audioSource\n            this.source.connect(this.gainNode)\n            break\n          case \"2\":\n            navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n            .then(this.getUserMic)\n            .catch(e => console.log(e))\n            break\n        }\n      },\n      immediate: true\n    }\n  },\n  mounted() {\n    audioUnlock(this.audioCtx)\n    this.setNoteConfig()\n  },\n  beforeDestroy() {\n    if(this.isPlaying) this.gainNode.disconnect(this.audioCtx.destination)\n    if(this.micStream) this.micStream.getAudioTracks()[0].stop()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n#source {\n  > button {\n    margin: 10px;\n  }\n  #config {\n    display: flex;\n    justify-content: space-around;\n    flex-direction: column;\n    > .audio-note {\n      width: 50vw;\n      min-width: 300px;\n      margin: 15px auto;\n      border: solid 1px #d9d9d9;\n      > h3 {\n        text-align: left;\n        margin: 10px;\n        > span {\n          display: inline-block;\n          width: 100px;\n          text-align: right;\n        }\n      }\n      .item {\n        display: flex;\n        width: 100%;\n        max-width: 800px;\n        margin: 5px auto;\n        padding: 10px;\n        max-height: 60vh;\n        overflow: hidden;\n        > audio {\n          margin: auto;\n        }\n        > label {\n          display: inline-block;\n          min-width: 150px;\n          text-align: right;\n          > span {\n            font-weight: 600;\n            display: inline-block;\n            width: 50px;\n            text-align: center;\n          }\n        }\n        > input {\n          width: 100%;\n          max-width: 600px;\n          margin: 0 20px;\n        }\n        > select {\n          margin: 0 20px;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Source.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Source.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Source.vue?vue&type=template&id=08d946d0&scoped=true&\"\nimport script from \"./Source.vue?vue&type=script&lang=js&\"\nexport * from \"./Source.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Source.vue?vue&type=style&index=0&id=08d946d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"08d946d0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}