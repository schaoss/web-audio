{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./src/views/Analyser.vue?dde1","webpack:///./src/views/Analyser.vue?4d74","webpack:///src/views/Analyser.vue","webpack:///./src/views/Analyser.vue?146a","webpack:///./src/views/Analyser.vue"],"names":["__webpack_require__","init","data","byteOffset","length","this","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Analyser_vue_vue_type_style_index_0_id_519cf040_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Analyser_vue_vue_type_style_index_0_id_519cf040_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","_h","$createElement","_c","_self","attrs","id","_v","on","click","clickHandler","muteHandler","_s","isMute","staticClass","_l","key","style","height","fftArray","staticRenderFns","Analyservue_type_script_lang_js_","name","AudioContext","window","webkitAudioContext","audioCtx","gainNode","createGain","analyser","createAnalyser","gain","value","fftSize","connect","isPlaying","source","micStream","Uint8Array","methods","stop","play","destination","requestAnimationFrame","getFFTData","disconnect","getUserMic","stream","createMediaStreamSource","getByteFrequencyData","mounted","navigator","mediaDevices","getUserMedia","audio","video","then","catch","e","console","log","beforeDestroy","getAudioTracks","views_Analyservue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"qGAAAA,EAAQ,OAARA,CAAwB,mBAAAC,GACxB,gBAAAC,EAAAC,EAAAC,GACA,OAAAH,EAAAI,KAAAH,EAAAC,EAAAC,2CCFA,IAAAE,EAAAN,EAAA,QAAAO,EAAAP,EAAAQ,EAAAF,GAAoiBC,EAAG,8CCAviB,IAAAE,EAAA,WAA0B,IAAAC,EAAAL,KAAaM,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,cAAiBH,EAAA,MAAAH,EAAAO,GAAA,cAAAJ,EAAA,UAA6CK,IAAIC,MAAAT,EAAAU,gBAA0BV,EAAAO,GAAA,oBAAAJ,EAAA,UAA0CK,IAAIC,MAAAT,EAAAW,eAAyBX,EAAAO,GAAA,IAAAP,EAAAY,GAAAZ,EAAAa,OAAA,wBAAAV,EAAA,OAAqEE,OAAOC,GAAA,YAAeH,EAAA,OAAYW,YAAA,eAAyBX,EAAA,OAAYW,YAAA,UAAqBd,EAAAe,GAAA,aAAAjB,GAA0B,OAAAK,EAAA,OAAiBa,IAAAlB,EAAAgB,YAAA,UAAAG,OAAoCC,OAAAlB,EAAAmB,SAAArB,EAAA,uBACpgBsB,KCeAC,4CACAC,KAAA,SACA9B,KAFA,WAGA,IAAA+B,EAAAC,OAAAD,cAAAC,OAAAC,mBACAC,EAAA,IAAAH,EACAI,EAAAD,EAAAE,aACAC,EAAAH,EAAAI,iBAKA,OAHAH,EAAAI,KAAAC,MAAA,EACAH,EAAAI,QAAA,KACAJ,EAAAK,QAAAP,IAEAQ,WAAA,EACAtB,QAAA,EACAuB,OAAA,KACAV,WACAC,WACAE,WACAQ,UAAA,KACAlB,SAAA,IAAAmB,WAAAT,EAAAI,WAGAM,SACA7B,aADA,WAEAf,KAAAwC,UACAxC,KAAA6C,OAEA7C,KAAA8C,QAGA9B,YARA,WASAhB,KAAAkB,QACAlB,KAAAkB,QAAA,EACAlB,KAAAgC,SAAAI,KAAAC,MAAA,IAEArC,KAAAkB,QAAA,EACAlB,KAAAgC,SAAAI,KAAAC,MAAA,IAGAS,KAjBA,WAkBA9C,KAAAwC,WAAA,EACAxC,KAAAgC,SAAAO,QAAAvC,KAAA+B,SAAAgB,aACAC,sBAAAhD,KAAAiD,aAEAJ,KAtBA,WAuBA7C,KAAAwC,WAAA,EACAxC,KAAAgC,SAAAkB,WAAAlD,KAAA+B,SAAAgB,cAEAI,WA1BA,SA0BAC,GACApD,KAAA0C,UAAAU,EACApD,KAAAyC,OAAAzC,KAAA+B,SAAAsB,wBAAAD,GACApD,KAAAyC,OAAAF,QAAAvC,KAAAkC,WAEAe,WA/BA,WAgCAjD,KAAAwB,SAAA,IAAAmB,WAAA3C,KAAAkC,SAAAI,SACAtC,KAAAkC,SAAAoB,qBAAAtD,KAAAwB,UACAxB,KAAAwC,WAAAQ,sBAAAhD,KAAAiD,cAGAM,QA3DA,WA4DAC,UAAAC,aAAAC,cAAAC,OAAA,EAAAC,OAAA,IACAC,KAAA7D,KAAAmD,YACAW,MAAA,SAAAC,GAAA,OAAAC,QAAAC,IAAAF,MAEAG,cAhEA,WAiEAlE,KAAA0C,WAAA1C,KAAA0C,UAAAyB,iBAAA,GAAAtB,UCjFkVuB,EAAA,0BCQlVC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACAhE,EACAqB,GACF,EACA,KACA,WACA,MAIA4C,EAAAG,QAAAC,OAAA,eACeC,EAAA,WAAAL","file":"js/chunk-f868f61a.b15772b9.js","sourcesContent":["require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=style&index=0&id=519cf040&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=style&index=0&id=519cf040&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"analyser\"}},[_c('h1',[_vm._v(\"Analyser\")]),_c('button',{on:{\"click\":_vm.clickHandler}},[_vm._v(\" Play / Pause \")]),_c('button',{on:{\"click\":_vm.muteHandler}},[_vm._v(\" \"+_vm._s(_vm.isMute ? 'unmute' : 'mute')+\" \")]),_c('div',{attrs:{\"id\":\"config\"}},[_c('div',{staticClass:\"audio-note\"},[_c('div',{staticClass:\"result\"},_vm._l((512),function(n){return _c('div',{key:n,staticClass:\"fftData\",style:({'height': _vm.fftArray[(n-1)]+2 + 'px'})})}))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"analyser\">\n    <h1>Analyser</h1>\n    <button @click=\"clickHandler\"> Play / Pause </button>\n    <button @click=\"muteHandler\"> {{isMute ? 'unmute' : 'mute'}} </button>\n    <div id=\"config\">\n      <div class=\"audio-note\">\n        <div class=\"result\">\n          <div class=\"fftData\" v-for=\"n in 512\" :key=\"n\" :style=\"{'height': fftArray[(n-1)]+2 + 'px'}\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Source\",\n  data() {\n    const AudioContext = window.AudioContext || window.webkitAudioContext // 跨瀏覽器\n    const audioCtx = new AudioContext() // 主控台的概念\n    const gainNode = audioCtx.createGain() // 增益節點 控制音量的\n    const analyser = audioCtx.createAnalyser()\n\n    gainNode.gain.value = 1\n    analyser.fftSize = 1024\n    analyser.connect(gainNode)\n    return{\n      isPlaying: false,\n      isMute: false,\n      source: null,\n      audioCtx,\n      gainNode,\n      analyser,\n      micStream: null,\n      fftArray: new Uint8Array(analyser.fftSize),\n    }\n  },\n  methods: {\n    clickHandler(){\n      if (this.isPlaying) {\n        this.stop()\n      } else {\n        this.play()\n      }\n    },\n    muteHandler() {\n      if (this.isMute) {\n        this.isMute = false\n        this.gainNode.gain.value = 1\n      } else {\n        this.isMute = true\n        this.gainNode.gain.value = 0\n      }\n    },\n    play() {\n      this.isPlaying = true\n      this.gainNode.connect(this.audioCtx.destination)\n      requestAnimationFrame(this.getFFTData)\n    },\n    stop() {\n      this.isPlaying = false\n      this.gainNode.disconnect(this.audioCtx.destination)\n    },\n    getUserMic(stream) {\n      this.micStream = stream\n      this.source = this.audioCtx.createMediaStreamSource(stream)\n      this.source.connect(this.analyser)\n    },\n    getFFTData(){\n      this.fftArray = new Uint8Array(this.analyser.fftSize)\n      this.analyser.getByteFrequencyData(this.fftArray)\n      if (this.isPlaying) requestAnimationFrame(this.getFFTData)\n    }\n  },\n  mounted() {\n    navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n    .then(this.getUserMic)\n    .catch(e => console.log(e))\n  },\n  beforeDestroy() {\n    if(this.micStream) this.micStream.getAudioTracks()[0].stop()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n#analyser {\n  > button {\n    margin: 10px;\n  }\n  #config {\n    display: flex;\n    justify-content: space-around;\n    flex-direction: column;\n    > .audio-note {\n      width: 1000px;\n      margin: 15px auto;\n      border: solid 1px #d9d9d9;\n      .result {\n        display: flex;\n        justify-content: center;\n        height: 300px;\n        vertical-align: middle;\n        align-items: center;\n        .fftData {\n          display: block;\n          width: 2px;\n          background-color: #3692be;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Analyser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Analyser.vue?vue&type=template&id=519cf040&scoped=true&\"\nimport script from \"./Analyser.vue?vue&type=script&lang=js&\"\nexport * from \"./Analyser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Analyser.vue?vue&type=style&index=0&id=519cf040&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"519cf040\",\n  null\n  \n)\n\ncomponent.options.__file = \"Analyser.vue\"\nexport default component.exports"],"sourceRoot":""}