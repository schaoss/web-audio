(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1d1f5de"],{"13d5":function(t,e,i){"use strict";var n=i("23e7"),a=i("d58f").left,r=i("a640"),s=i("ae40"),c=r("reduce"),o=s("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!o},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1a9c":function(t,e,i){"use strict";var n=i("2ef9"),a=i.n(n);a.a},"1fe4":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"guitar-tuner"}},[i("h1",[t._v("Guitar Tuner 2.0")]),i("button",{on:{click:t.clickHandler}},[t._v(" On / Off ")]),i("div",{attrs:{id:"config"}},[i("div",{staticClass:"audio-note"},[i("h3",[t._v(t._s(t.getFrequencyStr))]),i("h2",[t._v(t._s(t.getNoteStr))]),i("h4",[t._v(t._s(t.getCentsOffStr))]),i("div",{staticClass:"result"},t._l(512,(function(e){return i("div",{key:e,staticClass:"fftData",style:{height:200*t.timeArray[e-1]+2+"px"}})})),0)])])])},a=[],r=(i("13d5"),i("ace4"),i("d3b7"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("0847")),s={name:"GuitarTuner2",data:function(){var t=window.AudioContext||window.webkitAudioContext,e=new t,i=e.createGain(),n=e.createAnalyser();return i.gain.value=0,n.fftSize=2048,n.connect(i),{isPlaying:!1,isMute:!1,source:null,audioCtx:e,gainNode:i,analyser:n,micStream:null,timeArray:new Float32Array(n.fftSize/2),semiTone:null,centsOff:0}},computed:{getInputFrequency:function(){var t=this.timeArray.length/2,e=.9,i=new Array(t),n=-1,a=0,r=1,s=!1;if(this.timeArray.reduce((function(t,e){return t+Math.pow(e,2)}),0)<.01)return-1;for(var c=0;c<t;c++){for(var o=0,u=0;u<t;u++)o+=Math.abs(this.timeArray[u]-this.timeArray[u+c]);if(o=1-o/t,i[c]=o,o>e&&o>r)s=!0,o>a&&(a=o,n=c);else if(s){var f=(i[n+1]-i[n-1])/i[n];return Math.round(this.audioCtx.sampleRate/(n+8*f))}r=o}return a>.01?Math.round(this.audioCtx.sampleRate/n):-1},getFrequencyStr:function(){return this.getInputFrequency>0?this.getInputFrequency:"-"},getNoteStr:function(){var t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return this.semiTone?t[this.semiTone%12]:"-"},getCentsOffStr:function(){return this.centsOff<0?Math.abs(this.centsOff)+" b":this.centsOff>0?Math.abs(this.centsOff)+" #":"-"}},methods:{clickHandler:function(){this.isPlaying?this.stop():this.play()},play:function(){this.isPlaying=!0,this.gainNode.connect(this.audioCtx.destination),requestAnimationFrame(this.getMicData)},stop:function(){this.isPlaying=!1,this.gainNode.disconnect(this.audioCtx.destination)},getUserMic:function(t){this.micStream=t,this.source=this.audioCtx.createMediaStreamSource(t),this.source.connect(this.analyser)},getMicData:function(){this.timeArray=new Float32Array(this.analyser.fftSize),this.analyser.getFloatTimeDomainData(this.timeArray),this.semiTone=this.getSemitone(this.getInputFrequency),this.centsOff=this.getCentsOffFromPitch(this.getInputFrequency,this.semiTone),this.isPlaying&&requestAnimationFrame(this.getMicData)},getSemitone:function(t){return Math.round(Math.log(t/440)/Math.log(2)*12)+69},getFrequencyFromSemitone:function(t){return 440*Math.pow(2,(t-69)/12)},getCentsOffFromPitch:function(t,e){return Math.floor(1200*Math.log(t/this.getFrequencyFromSemitone(e))/Math.log(2))}},mounted:function(){Object(r["a"])(this.audioCtx),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.getUserMic).catch((function(t){return console.log(t)}))},beforeDestroy:function(){this.micStream&&this.micStream.getAudioTracks()[0].stop()}},c=s,o=(i("1a9c"),i("2877")),u=Object(o["a"])(c,n,a,!1,null,"45cc990b",null);e["default"]=u.exports},"2ef9":function(t,e,i){},cfc3:function(t,e,i){var n=i("74e8");n("Float32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))}}]);
//# sourceMappingURL=chunk-d1d1f5de.a7ea91f5.js.map