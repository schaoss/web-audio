(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41654b44"],{"0c2b":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"voice-changer"}},[e("h1",[t._v("VoiceChanger")]),e("button",{on:{click:t.clickHandler}},[t._v(" On / Off ")]),e("div",{attrs:{id:"config"}},[e("div",{staticClass:"audio-note"},[e("div",{staticClass:"item"},[e("label",{attrs:{for:"pitchRatio"}},[t._v("頻率倍率 : "),e("span",[t._v(t._s(t.pitchRatio))])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.pitchRatio,expression:"pitchRatio"}],attrs:{type:"range",min:"0.5",max:"2",step:"0.01",id:"pitchRatio"},domProps:{value:t.pitchRatio},on:{__r:function(i){t.pitchRatio=i.target.value}}})]),e("div",{staticClass:"item"},[e("label",{attrs:{for:"overlapRatio"}},[t._v("重疊率 : "),e("span",[t._v(t._s(t.overlapRatio))])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.overlapRatio,expression:"overlapRatio"}],attrs:{type:"range",min:"0.1",max:"1",step:"0.01",id:"overlapRatio"},domProps:{value:t.overlapRatio},on:{__r:function(i){t.overlapRatio=i.target.value}}})]),e("div",{staticClass:"result"},t._l(512,(function(i){return e("div",{key:i,staticClass:"timeData",style:{height:200*t.timeArray[i-1]+2+"px"}})})),0)])])])},o=[],n=(e("ace4"),e("d3b7"),e("cfc3"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("0847")),r={name:"VoiceChanger",data:function(){var t=window.AudioContext||window.webkitAudioContext,i=new t,e=i.createGain();return e.gain.value=1,{isPlaying:!1,audioCtx:i,gainNode:e,micStream:null,timeArray:new Float32Array(2048),pitchRatio:1,overlapRatio:.5,bufferSize:2048}},methods:{clickHandler:function(){this.isPlaying?this.stop():this.play()},play:function(){this.isPlaying=!0,this.gainNode.connect(this.audioCtx.destination)},stop:function(){this.isPlaying=!1,this.gainNode.disconnect(this.audioCtx.destination)},getUserMic:function(t){var i=this;this.micStream=t;var e=new Float32Array(2*this.bufferSize),a=this.hannWindow(this.bufferSize),o=this.audioCtx.createMediaStreamSource(t),n=this.audioCtx.createScriptProcessor(this.bufferSize,1,1);n.onaudioprocess=function(t){for(var o=t.inputBuffer.getChannelData(0),n=t.outputBuffer.getChannelData(0),r=0;r<o.length;r++)o[r]*=a[r],e[r]=e[r+i.bufferSize],e[r+i.bufferSize]=0;for(var c=new Float32Array(i.bufferSize),s=0,u=0;s<i.bufferSize;s++,u+=parseFloat(i.pitchRatio)){var f=Math.floor(u)%i.bufferSize,l=o[f],d=o[(f+1)%i.bufferSize];c[s]+=i.linearInterpolation(l,d,u%i.pitchRatio)*a[s]}for(var h=0;h<i.bufferSize;h+=Math.round(i.bufferSize*i.overlapRatio))for(var v=0;v<=i.bufferSize;v++)e[h+v]+=c[v];for(var p=0;p<i.bufferSize;p++)n[p]=e[p]||0;i.timeArray=n},o.connect(n),n.connect(this.gainNode)},hannWindow:function(t){for(var i=new Float32Array(t),e=0;e<t;e++)i[e]=.5*(1-Math.cos(2*Math.PI*e/(t-1)));return i},linearInterpolation:function(t,i,e){return t+(i-t)*e}},mounted:function(){Object(n["a"])(this.audioCtx),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.getUserMic).catch((function(t){return console.log(t)}))},beforeDestroy:function(){this.micStream&&this.micStream.getAudioTracks()[0].stop()}},c=r,s=(e("86bb"),e("2877")),u=Object(s["a"])(c,a,o,!1,null,"8e9a387e",null);i["default"]=u.exports},"86bb":function(t,i,e){"use strict";var a=e("9450"),o=e.n(a);o.a},9450:function(t,i,e){},cfc3:function(t,i,e){var a=e("74e8");a("Float32",(function(t){return function(i,e,a){return t(this,i,e,a)}}))}}]);
//# sourceMappingURL=chunk-41654b44.c1b14c02.js.map